<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>首页</title>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <style>
        .input_line {
            BORDER-TOP-STYLE: none;BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE:solid; -webkit-box-shadow:none;
        }
        div{font-size: 12px;}
    </style>

</head>
<body>

<div class="container-fluid text-muted" style="padding-top: 10px; padding-bottom: 10px;">
    <div class="row">
        <div class="col-xs-7">
            <img class="img-responsive" src="/images/cover.jpg">
        </div>
        <div class="col-xs-5">
            <span>哇哈哈哈哈哈哈哈哈哈哈或或或或或或或或或或或或或或或</span>
            <br><br>
            <span style="color: red;"><strong>￥1</strong> </span> <del>$158</del>
        </div>
    </div>

    <form>
        <div class="form-group">
            <!--<label for="address">收货地址</label>-->
            <input type="text" class="input_line input-sm address form-control" id="address" placeholder="收货地址">
        </div>
        <div class="form-group">
            <!--<label for="shipping_name">收货姓名</label>-->
            <input type="text" class="input_line input-sm shipping_name form-control" id="shipping_name" placeholder="收货姓名">
        </div>
        <div class="form-group">
            <!--<label for="phone">手机号码</label>-->
            <input type="text" class="input_line input-sm phone form-control" id="phone" placeholder="手机号码">
        </div>
        <div class="form-group">
            <!--<label for="school_name">学校名字</label>-->
            <input type="text" class="input_line input-sm school_name form-control" id="school_name" placeholder="学校名字">
        </div>
        <div class="form-group">
            <!--<label for="real_name">真实姓名</label>-->
            <input type="text" class="input_line input-sm real_name form-control" id="real_name" placeholder="真实姓名">
        </div>

        <div class="radio row">
            <div class="col-xs-3" style="padding-right: 0;">
                背面刻字：
            </div>
            <div class="col-xs-8">
                <label><input class="font_type" type="radio" checked="checked" value="1" tn="生肖" name="font_type[]">生肖+名字</label>
                <label><input class="font_type" type="radio" value="2" tn="星座" name="font_type[]">星座+名字</label>
                <select class="input_line input-sm real_name form-control" id="font_text">
                    <option value="鼠">鼠</option>
                    <option value="牛">牛</option>
                    <option value="虎">虎</option>
                    <option value="兔">兔</option>
                    <option value="龙">龙</option>
                    <option value="蛇">蛇</option>
                    <option value="马">马</option>
                    <option value="羊">羊</option>
                    <option value="猴">猴</option>
                    <option value="鸡">鸡</option>
                    <option value="狗">狗</option>
                    <option value="猪">猪</option>
                </select>
                <!--<input type="text" class="input_line input-sm real_name form-control" id="font_text"  placeholder="生肖">-->
            </div>
        </div>
        <div class="radio row">
            <div class="col-xs-3" style="padding-right: 0;">
                U盘样式：
            </div>
            <div class="col-xs-8">
                <label class="ubtn btn btn-info active btn-sm" tt="p1" style="padding-left: 10px;">
                    <input class="text-muted" style="display:none;" type="radio" checked="checked" value="1" name="u_type[]">金属经典款</label>
                <label class="ubtn btn active btn-sm" tt="p2" style="padding-left: 10px;">
                    <input class="text-muted" style="display:none;"  type="radio" value="2" name="u_type[]">虎扣U盘</label>
                <label class="ubtn btn active btn-sm"  tt="p3" style="padding-left: 10px;">
                    <input class="text-muted" style="display:none;" type="radio" value="3" name="u_type[]">小精钢</label>
                <label class="ubtn btn active btn-sm" tt="p4" style="padding-left: 10px;">
                    <input class="text-muted" style="display:none;" type="radio" value="4" name="u_type[]">钥匙扣U盘</label>
            </div>
        </div>

        <div class="radio row">
            <div class="col-xs-3" style="padding-right: 0;">
                颜色：
            </div>
            <div class="col-xs-8">
                <label><input class="ccc" type="radio" cc="j" checked="checked" value="1" name="color[]">金色</label>
                <label><input class="ccc" type="radio" cc="y" value="2" name="color[]">银色</label>
                <label><input class="ccc" type="radio" cc="h" value="3" name="color[]">黑色</label>
                <br>
            </div>
        </div>
        <div class="radio row">
            <img src="/images/p1-j.jpg" class="pimg img-responsive center-block p1-j">
            <img src="/images/p2-j.jpg" style="display: none;" class="pimg img-responsive center-block p2-j">
            <img src="/images/p3-j.jpg" style="display: none;" class="pimg img-responsive center-block p3-j">
            <img src="/images/p4-j.jpg" style="display: none;" class="pimg img-responsive center-block p4-j">
            <img src="/images/p1-y.jpg" style="display: none;" class="pimg img-responsive center-block p1-y">
            <img src="/images/p2-y.jpg" style="display: none;" class="pimg img-responsive center-block p2-y">
            <img src="/images/p3-y.jpg" style="display: none;" class="pimg img-responsive center-block p3-y">
            <img src="/images/p4-y.jpg" style="display: none;" class="pimg img-responsive center-block p4-y">
            <img src="/images/p1-h.jpg" style="display: none;" class="pimg img-responsive center-block p1-h">
            <img src="/images/p2-h.jpg" style="display: none;" class="pimg img-responsive center-block p2-h">
            <img src="/images/p3-h.jpg" style="display: none;" class="pimg img-responsive center-block p3-h">
            <img src="/images/p4-h.jpg" style="display: none;" class="pimg img-responsive center-block p4-h">
        </div>
        <br>
        <div class="subbtn btn btn-info btn-block center-block">提交订单</div>
    </form>
    <br>
</div>
</body>

<script>
    function checkPhone(phone){
        if(!(/^1[3456789]\d{9}$/.test(phone))){
            return false;
        }
        return true;
    }

    $('.subbtn').on('click', function () {
        address = $('.address').val();
        shipping_name = $('.shipping_name').val();
        school_name = $('.school_name').val();
        real_name = $('.real_name').val();
        phone = $('.phone').val();
        font_type = $("input[name='font_type[]']:checked").val();
        u_type = $("input[name='u_type[]']:checked").val();
        color = $("input[name='color[]']:checked").val();
        font_text = $('#font_text').val();

        if (!address){
            alert('收货地址不能为空');
            return;
        }
        if (!shipping_name){
            alert('收货人姓名不能为空');
            return;
        }

        if (!phone){
            alert('手机号不能为空');
            return;
        }

        if(!checkPhone(phone)){
            alert('手机格式不正确');
            return;
        }

        if (!school_name){
            alert('学校名不能为空');
            return;
        }
        if (!real_name){
            alert('姓名不能为空');
            return;
        }

        if (!font_text){
            alert('背面刻字不能为空');
            return;
        }
        if (!u_type){
            alert('U盘类型不能为空');
            return;
        }
        if (!color){
            alert('颜色不能为空');
            return;
        }

        $.ajax({
            data:{
                address:address,
                shipping_name:shipping_name,
                phone:phone,
                school_name:school_name,
                real_name:real_name,
                font_type:font_type,
                font_text:font_text,
                u_type:u_type,
                color:color
            },
            type:'post',
            url:'/index.php/index/index/saveOrder',
            success:function (data) {
                alert(data.msg);
                if (data.status === 1){
                    window.location.reload();
                }
            }
        });
    });

    $('.ubtn').on('change', function () {
        $('.ubtn').removeClass('btn-info');
        $(this).addClass('btn-info');
        $('.pimg').hide();
        $('.'+$(this).attr('tt')+'-'+$('input[name="color[]"]:checked').attr('cc')).show();
        //$('#u_img').attr('src', '/images/'+$(this).attr('tt')+'-'+$('input[name="color[]"]:checked').attr('cc')+'.jpg');
    });

    $('.ccc').on('change', function () {
        $('.pimg').hide();
        $('.'+$('.ubtn.btn-info').attr('tt')+'-'+$(this).attr('cc')).show();
    });
    
    $('.font_type').on('change', function () {
        var sx = '<option value="鼠">鼠</option>'+
                '<option value="牛">牛</option>'+
                '<option value="虎">虎</option>'+
                '<option value="兔">兔</option>'+
                '<option value="龙">龙</option>'+
                '<option value="蛇">蛇</option>'+
                '<option value="马">马</option>'+
                '<option value="羊">羊</option>'+
                '<option value="猴">猴</option>'+
                '<option value="鸡">鸡</option>'+
                '<option value="狗">狗</option>'+
                '<option value="猪">猪</option>';

        var xz = '<option value="白羊座">白羊座</option>'+
                    '<option value="金牛座">金牛座</option>'+
                    '<option value="双子座">双子座</option>'+
                    '<option value="巨蟹座">巨蟹座</option>'+
                    '<option value="狮子座">狮子座</option>'+
                    '<option value="处女座">处女座</option>'+
                    '<option value="天秤座">天秤座</option>'+
                    '<option value="天蝎座">天蝎座</option>'+
                    '<option value="射手座">射手座</option>'+
                    '<option value="摩羯座">摩羯座</option>'+
                    '<option value="水瓶座">水瓶座</option>'+
                    '<option value="双鱼座">双鱼座</option>';

        if ($(this).attr('tn') === '生肖'){
            $('#font_text').html(sx);
        }else{
            $('#font_text').html(xz);
        }
    });
</script>

</html>
